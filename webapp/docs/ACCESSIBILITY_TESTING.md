# 접근성 테스트 가이드

한국저시력인협회 웹사이트의 WCAG 2.2 AA 접근성 준수를 검증하기 위한 포괄적인 테스트 가이드입니다.

## 목차
1. [자동화된 테스트](#자동화된-테스트)
2. [스크린 리더 테스트](#스크린-리더-테스트)
3. [키보드 네비게이션 테스트](#키보드-네비게이션-테스트)
4. [시각적 검증](#시각적-검증)
5. [체크리스트](#전체-체크리스트)

---

## 자동화된 테스트

### 1. Pa11y (CI/CD 통합)

이미 구현된 자동화 테스트를 실행합니다.

```bash
# 전체 페이지 접근성 테스트
npm run test:a11y

# 특정 페이지만 테스트
npx pa11y http://localhost:3020/diagnosis
```

**검사 항목:**
- HTML 구조 및 시맨틱 검증
- ARIA 속성 올바른 사용
- 명암비 (최소 4.5:1)
- 대체 텍스트 (alt 속성)
- 폼 레이블 연결

### 2. axe DevTools (브라우저 확장)

Chrome/Edge/Firefox 확장 프로그램을 설치하여 실시간 테스트합니다.

1. 브라우저에 axe DevTools 설치
2. 개발자 도구 열기 (F12)
3. "axe DevTools" 탭 선택
4. "Scan ALL of my page" 클릭

**장점:**
- 실시간 검사
- 구체적인 수정 방법 제시
- DOM 요소 하이라이트

### 3. 개발 중 실시간 검증

개발 서버 실행 시 자동으로 `AxeReporter` 컴포넌트가 콘솔에 경고를 출력합니다.

```bash
npm run dev
# 브라우저 콘솔(F12)에서 접근성 위반 확인
```

---

## 스크린 리더 테스트

### Windows - NVDA (무료)

#### 설치
1. https://www.nvaccess.org/download/ 에서 다운로드
2. 설치 후 재부팅
3. Ctrl + Alt + N으로 NVDA 시작

#### 기본 단축키
| 기능 | 단축키 |
|------|--------|
| NVDA 시작/중지 | Ctrl + Alt + N |
| 읽기 중지 | Ctrl |
| 다음 요소 | Tab |
| 이전 요소 | Shift + Tab |
| 링크 목록 | NVDA + F7 |
| 제목 탐색 | H (다음), Shift + H (이전) |
| 랜드마크 탐색 | D (다음), Shift + D (이전) |

#### 테스트 절차
1. **페이지 랜딩**: 페이지 제목이 정확히 읽히는가?
2. **헤더 네비게이션**: H키로 제목 구조를 탐색할 수 있는가?
3. **랜드마크**: D키로 main, nav, aside 등을 이동할 수 있는가?
4. **링크**: NVDA + F7로 모든 링크의 의미를 파악할 수 있는가?
5. **폼**: 입력 필드와 레이블이 명확히 연결되어 있는가?
6. **이미지**: 이미지의 alt 텍스트가 적절한가?
7. **버튼**: 버튼의 목적이 명확히 전달되는가?

### macOS - VoiceOver (기본 제공)

#### 시작
- Command + F5: VoiceOver 켜기/끄기
- Command + Option (VO 키)

#### 기본 단축키
| 기능 | 단축키 |
|------|--------|
| VoiceOver 켜기/끄기 | Cmd + F5 |
| 다음 요소 | VO + → |
| 이전 요소 | VO + ← |
| 클릭 | VO + Space |
| 로터 열기 | VO + U |
| 제목 탐색 | VO + Cmd + H |

#### 로터 사용법
1. VO + U로 로터 열기
2. ← / → 로 카테고리 선택 (제목, 링크, 폼, 랜드마크 등)
3. ↑ / ↓ 로 항목 선택
4. Enter로 이동

### iOS - VoiceOver

#### 시작
설정 > 손쉬운 사용 > VoiceOver 켜기

#### 기본 제스처
| 기능 | 제스처 |
|------|--------|
| 다음 요소 | 한 손가락 오른쪽 스와이프 |
| 이전 요소 | 한 손가락 왼쪽 스와이프 |
| 활성화 | 두 번 탭 |
| 로터 열기 | 두 손가락 회전 |
| 읽기 시작 | 두 손가락 위로 스와이프 |

---

## 키보드 네비게이션 테스트

**마우스를 사용하지 않고** 전체 사이트를 탐색할 수 있어야 합니다.

### 필수 단축키

| 기능 | 단축키 |
|------|--------|
| 다음 요소 | Tab |
| 이전 요소 | Shift + Tab |
| 링크/버튼 활성화 | Enter |
| 버튼 활성화 | Space (버튼만) |
| 본문으로 건너뛰기 | Tab → Enter (첫 번째 링크) |
| 페이지 스크롤 | Space / Shift + Space |

### 체크리스트

#### ✅ 포커스 가시성
- [ ] 모든 포커스 요소에 2px 이상의 명확한 테두리가 표시되는가?
- [ ] 포커스 인디케이터가 배경과 대비가 충분한가? (최소 3:1)
- [ ] 포커스 순서가 논리적인가? (시각적 순서와 일치)

#### ✅ 건너뛰기 링크
- [ ] Tab 첫 번째 누름에 "본문으로 건너뛰기" 링크가 나타나는가?
- [ ] 링크 활성화 시 main 콘텐츠로 포커스가 이동하는가?

#### ✅ 대화 상자 (모달)
- [ ] 모달 열릴 때 포커스가 모달 내부로 이동하는가?
- [ ] Tab으로 모달 내부 요소만 탐색되는가? (포커스 트랩)
- [ ] ESC 키로 모달을 닫을 수 있는가?
- [ ] 모달 닫힐 때 이전 포커스 위치로 돌아가는가?

#### ✅ 드롭다운 메뉴
- [ ] Enter/Space로 메뉴를 열 수 있는가?
- [ ] ↑/↓ 화살표로 메뉴 항목을 탐색할 수 있는가?
- [ ] ESC로 메뉴를 닫을 수 있는가?

#### ✅ 폼
- [ ] Tab으로 모든 입력 필드를 순서대로 탐색할 수 있는가?
- [ ] 라디오 버튼은 ↑/↓ 또는 ←/→ 로 선택되는가?
- [ ] 체크박스는 Space로 토글되는가?
- [ ] Enter로 폼을 제출할 수 있는가?

---

## 시각적 검증

### 1. 텍스트 확대 테스트 (WCAG 1.4.4)

#### 브라우저 확대 (200%)
1. Ctrl + "+" (Windows) 또는 Cmd + "+" (Mac)을 5번 눌러 200% 확대
2. **체크:**
   - [ ] 수평 스크롤이 발생하지 않는가?
   - [ ] 텍스트가 잘리거나 겹치지 않는가?
   - [ ] 모든 기능이 여전히 작동하는가?

#### 시스템 폰트 크기 변경
**Windows:**
1. 설정 > 접근성 > 텍스트 크기 → 최대로 설정
2. 브라우저 재시작 후 확인

**macOS:**
1. 시스템 설정 > 손쉬운 사용 > 디스플레이 > 텍스트 크기 조정

**체크:**
- [ ] 텍스트가 컨테이너를 벗어나지 않는가?
- [ ] 버튼/링크가 여전히 클릭 가능한 크기인가? (최소 24x24px)

### 2. 명암비 테스트 (WCAG 1.4.3, AAA는 7:1)

#### 도구
- **Chrome DevTools**: 요소 검사 → Styles 탭에서 색상 클릭 → Contrast ratio 확인
- **WebAIM Contrast Checker**: https://webaim.org/resources/contrastchecker/

#### 기준
| 요소 | AA (최소) | AAA (권장) |
|------|-----------|------------|
| 일반 텍스트 (18pt 미만) | 4.5:1 | **7:1** ✅ |
| 큰 텍스트 (18pt 이상) | 3:1 | 4.5:1 |
| UI 컴포넌트 (버튼, 입력) | 3:1 | - |

#### 체크리스트
- [ ] 본문 텍스트: 7:1 이상 (AAA)
- [ ] 제목 텍스트: 7:1 이상
- [ ] 링크 텍스트 (방문 전/후): 4.5:1 이상
- [ ] 버튼 배경과 텍스트: 4.5:1 이상
- [ ] 버튼 테두리와 배경: 3:1 이상
- [ ] 포커스 인디케이터: 3:1 이상

### 3. 고대비 모드 테스트

#### Windows 고대비 모드 활성화
1. Alt + Shift + Print Screen
2. 또는 설정 > 접근성 > 고대비

#### 체크리스트
- [ ] 모든 텍스트가 읽을 수 있는가?
- [ ] 버튼과 링크가 명확히 구별되는가?
- [ ] 아이콘이 의미를 잃지 않는가? (텍스트 대안 필요)
- [ ] 포커스 인디케이터가 보이는가?

### 4. 색맹 시뮬레이션

#### 도구
- **Chrome DevTools**: 렌더링 탭 → "Emulate vision deficiencies"
- **Toptal Color Blind Filter**: https://www.toptal.com/designers/colorfilter

#### 테스트 시나리오
1. **Protanopia (적색맹)**: 빨간색 구별 불가
2. **Deuteranopia (녹색맹)**: 초록색 구별 불가
3. **Tritanopia (청색맹)**: 파란색 구별 불가
4. **Achromatopsia (전색맹)**: 흑백만 인식

#### 체크리스트
- [ ] 색상만으로 의미를 전달하는 요소가 없는가?
   - ❌ "빨간색 버튼을 클릭하세요"
   - ✅ "오른쪽 하단의 '제출' 버튼을 클릭하세요"
- [ ] 차트/그래프에 패턴 또는 레이블이 있는가?
- [ ] 에러 메시지에 아이콘 또는 텍스트 설명이 있는가?

---

## 전체 체크리스트

### WCAG 2.2 AA 핵심 기준

#### 1. 인식의 용이성 (Perceivable)

##### 1.1 대체 텍스트
- [ ] 모든 이미지에 적절한 alt 속성 (장식 이미지는 alt="")
- [ ] 아이콘 버튼에 `aria-label` 또는 숨겨진 텍스트

##### 1.3 적응 가능
- [ ] 시맨틱 HTML 사용 (`<header>`, `<nav>`, `<main>`, `<footer>`)
- [ ] 제목 계층 구조 (h1 → h2 → h3, 단계 건너뛰지 않음)
- [ ] 리스트는 `<ul>`, `<ol>`, `<dl>` 사용
- [ ] 표는 `<table>`, `<th>`, `<caption>` 사용

##### 1.4 구별 가능
- [ ] 명암비: 일반 텍스트 7:1 (AAA), UI 3:1 (AA)
- [ ] 텍스트 200% 확대 시 수평 스크롤 없음
- [ ] 텍스트 간격 조정 시 콘텐츠 손실 없음
- [ ] 고정 헤더가 포커스를 가리지 않음 (`scroll-padding-top`)
- [ ] 색상만으로 의미 전달 금지

#### 2. 운용의 용이성 (Operable)

##### 2.1 키보드 접근성
- [ ] 모든 기능을 키보드로 접근 가능
- [ ] 포커스 트랩 없음 (모달 제외)
- [ ] 키보드 단축키 비활성화 가능 (있는 경우)

##### 2.4 탐색 가능
- [ ] "본문으로 건너뛰기" 링크
- [ ] 명확한 페이지 제목 (`<title>`)
- [ ] 논리적 포커스 순서
- [ ] 링크 목적이 명확함 (문맥 포함)
- [ ] 여러 경로로 페이지 접근 가능 (메뉴, 검색, 사이트맵)
- [ ] 명확한 제목 및 레이블
- [ ] 포커스 인디케이터 가시성 (2px 이상, 명암비 3:1)

##### 2.5 입력 방식
- [ ] 터치 타겟 최소 24x24px (WCAG 2.5.8)
- [ ] 드래그 동작에 대한 대안 제공

#### 3. 이해의 용이성 (Understandable)

##### 3.1 읽기 쉬움
- [ ] 페이지 언어 선언 (`<html lang="ko">`)
- [ ] 부분적 언어 변경 표시 (`<span lang="en">`)

##### 3.2 예측 가능
- [ ] 포커스 시 콘텐츠 변경 없음
- [ ] 입력 시 자동 제출 없음 (명시적 버튼 필요)
- [ ] 일관된 네비게이션
- [ ] 일관된 식별 (같은 기능 = 같은 레이블)

##### 3.3 입력 지원
- [ ] 에러 메시지 명확함
- [ ] 레이블 또는 안내 제공
- [ ] 에러 수정 제안
- [ ] 중요한 입력 시 확인 단계 (제출 전)

#### 4. 견고성 (Robust)

##### 4.1 호환성
- [ ] HTML 유효성 검사 통과
- [ ] ARIA 속성 올바른 사용
- [ ] 중복 ID 없음
- [ ] 보조 기술 호환성 테스트 (NVDA, VoiceOver)

---

## 테스트 보고서 양식

### 페이지별 테스트 결과

```markdown
## [페이지명]: /path/to/page

**테스트 일시:** 2025-01-06
**테스터:** 홍길동

### 자동화 도구 결과
- [ ] Pa11y: 0 errors
- [ ] axe DevTools: 0 violations
- [ ] ESLint a11y: 0 warnings

### 스크린 리더 (NVDA)
- [ ] 페이지 제목 명확
- [ ] 제목 구조 논리적
- [ ] 랜드마크 탐색 가능
- [ ] 링크 목적 명확
- [ ] 폼 레이블 연결

### 키보드 네비게이션
- [ ] 전체 페이지 Tab으로 탐색 가능
- [ ] 포커스 인디케이터 명확
- [ ] 모든 기능 키보드로 작동
- [ ] 포커스 순서 논리적

### 시각적 검증
- [ ] 200% 확대 시 레이아웃 유지
- [ ] 명암비 7:1 (AAA) 충족
- [ ] 고대비 모드 작동
- [ ] 색맹 시뮬레이션 통과

### 발견된 이슈
1. **[심각도: 높음/중간/낮음]** 이슈 설명
   - WCAG 기준: 1.4.3
   - 재현 방법: ...
   - 수정 방안: ...
```

---

## 참고 자료

### 공식 가이드라인
- [WCAG 2.2 (한국어)](https://www.w3.org/TR/WCAG22/)
- [K-WAH 2.1](http://www.wa.or.kr/m1/sub1.asp)
- [MDN 접근성 가이드](https://developer.mozilla.org/ko/docs/Web/Accessibility)

### 도구
- [axe DevTools](https://www.deque.com/axe/devtools/)
- [WAVE](https://wave.webaim.org/extension/)
- [Pa11y](https://pa11y.org/)
- [NVDA](https://www.nvaccess.org/)

### 추가 학습
- [WebAIM](https://webaim.org/)
- [The A11Y Project](https://www.a11yproject.com/)
- [Inclusive Components](https://inclusive-components.design/)

---

## 정기 테스트 일정

- **매 PR 전**: 자동화 도구 (Pa11y, ESLint)
- **주간**: 새로 추가된 페이지 수동 테스트
- **월간**: 전체 사이트 스크린 리더 테스트
- **분기별**: 실제 저시력인 사용자 테스트
